var booked_load_calendar_date_booking_options,booked_appt_form_options,bookedNewAppointment;function create_booked_modal(){"use strict";var e=jQuery(window).height();if(jQuery(window).width()>720)var t=e-295;else t=e;jQuery("body input, body textarea, body select").blur(),jQuery("body").addClass("booked-noScroll"),jQuery('<div class="booked-modal bm-loading"><div class="bm-overlay"></div><div class="bm-window"><div style="height:100px"></div></div></div>').appendTo("body"),jQuery(".booked-modal .bm-overlay").spin("booked_white"),jQuery(".booked-modal .bm-window").css({"max-height":t+"px"})}!function(e,t,a,o){"use strict";var n={ajax_url:"/",profilePage:"",publicAppointments:"",i18n_confirm_appt_delete:"Are you sure you want to cancel this appointment?",i18n_please_wait:"Please wait ...",i18n_wrong_username_pass:"Wrong username/password combination.",i18n_fill_out_required_fields:"Please fill out all required fields.",i18n_guest_appt_required_fields:"Please enter your name to book an appointment.",i18n_appt_required_fields:"Please enter your name, your email address and choose a password to book an appointment.",i18n_appt_required_fields_guest:'Please fill in all "Information" fields.',i18n_password_reset:"Please check your email for instructions on resetting your password.",i18n_password_reset_error:"That username or email is not recognized."},i=e(t);e.fn.spin.presets.booked={lines:10,length:7,width:5,radius:11,corners:1,rotate:0,direction:1,color:"#555",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"booked-spinner",zIndex:2e9,top:"50%",left:"50%"},e.fn.spin.presets.booked_top={lines:11,length:10,width:6,radius:15,corners:1,rotate:0,scale:.5,direction:1,color:"#aaaaaa",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"booked-spinner booked-spinner-top",zIndex:2e9,top:"15px",left:"50%"},e.fn.spin.presets.booked_white={lines:13,length:11,width:5,radius:18,scale:1,corners:1,rotate:0,direction:1,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"booked-spinner booked-white",zIndex:2e9,top:"50%",left:"50%"},i.on("resize",function(){adjust_calendar_boxes(),resize_booked_modal()});var r=e("#ajaxforgot"),s=e("#ajaxlogin"),d=e("#profile-forgot"),l=e(".booked-tab-content"),p=e(".booked-list-view"),c=e("#loginform");function u(){e("table.booked-calendar").find("tr.week").each(function(){0===e(this).children().length&&e(this).remove()})}function f(t,a){if(t=void 0===t||t,a=void 0!==a&&a)var o=a.find("li.active .savingState, .topSavingState.savingState, .calendarSavingState"),n=a.find(".monthName"),i=a.find("table.booked-calendar tbody");else o=e("li.active .savingState, .topSavingState.savingState, .calendarSavingState"),n=e(".monthName"),i=e("table.booked-calendar tbody");t?(o.fadeIn(200),n.hide(),i.animate({opacity:.2},100)):(o.hide(),n.show(),i.animate({opacity:1},0))}function b(){e(".booked_list_date_picker").each(function(){var t=e(this),o=t.parents(".booked-appt-list").attr("data-min-date"),i=t.parents(".booked-appt-list").attr("data-max-date");if(void 0===o)o=t.attr("data-min-date");t.datepicker({dateFormat:"yy-mm-dd",minDate:o,maxDate:i,showAnim:!1,beforeShow:function(t,a){e("#ui-datepicker-div").removeClass(),e("#ui-datepicker-div").addClass("booked_custom_date_picker")},onClose:function(t){e(".booked_list_date_picker_trigger").removeClass("booked-dp-active")},onSelect:function(t){var o=e(this),i=t,r=o.parents(".booked-list-view"),s=r.attr("data-default"),d=o.parents(".booked-list-view-nav").attr("data-calendar-id");void 0===s&&(s=!1),d||(d=0),r.addClass("booked-loading");var l={action:"booked_appointment_list_date",date:i,calendar_id:d,force_default:s};return e(a).trigger("booked-before-loading-appointment-list-booking-options"),r.spin("booked_top"),e.ajax({url:n.ajax_url,type:"post",data:l,success:function(e){r.html(e),b(),setTimeout(function(){r.removeClass("booked-loading")},1)}}),!1}})}),e("body").on("click",".booked_list_date_picker_trigger",function(t){t.preventDefault(),e(this).hasClass("booked-dp-active")||(e(this).addClass("booked-dp-active"),e(this).parents(".booked-appt-list").find(".booked_list_date_picker").datepicker("show"))})}i.on("load",function(){m.Init();adjust_calendar_boxes();var o=e(".booked-calendar-wrap");o.each(function(){var t=e(this),a=t.find("table.booked-calendar").attr("data-calendar-date");t.attr("data-default",a),init_tooltips(t)}),p.each(function(){var t=e(this),a=t.find(".booked-appt-list").attr("data-list-date");t.attr("data-default",a)}),u(),b(),e(".booked_calendar_chooser").change(function(o){o.preventDefault();var i=e(this);if(i.parents(".booked-calendarSwitcher").hasClass("calendar")){void 0===(s=(r=i.parents(".booked-calendar-shortcode-wrap").find(".booked-calendar-wrap")).attr("data-default"))&&(s=!1);d={action:"booked_calendar_month",gotoMonth:s,calendar_id:i.val()};f(!0,r),e.ajax({url:n.ajax_url,type:"post",data:d,success:function(a){r.html(a),adjust_calendar_boxes(),u(),init_tooltips(r),e(t).trigger("booked-load-calendar",d,i)}})}else{var r,s=(r=i.parents(".booked-calendar-shortcode-wrap").find(".booked-list-view")).attr("data-default");i.parents(".booked-calendarSwitcher").hasClass("calendar");void 0===s&&(s=!1),r.addClass("booked-loading");var d={action:"booked_appointment_list_date",date:s,calendar_id:i.val()};e(a).trigger("booked-before-loading-appointment-list-booking-options"),r.spin("booked_top"),e.ajax({url:n.ajax_url,type:"post",data:d,success:function(e){r.html(e),b(),setTimeout(function(){r.removeClass("booked-loading")},1)}})}return!1}),o.on("click",".page-right, .page-left, .monthName a",function(a){a.preventDefault();var o=e(this),i=o.attr("data-goto"),r=o.parents(".booked-calendar-wrap"),s=r.attr("data-default");void 0===s&&(s=!1);var d={action:"booked_calendar_month",gotoMonth:i,calendar_id:o.parents("table.booked-calendar").attr("data-calendar-id"),force_default:s};return f(!0,r),e.ajax({url:n.ajax_url,type:"post",data:d,success:function(a){r.html(a),adjust_calendar_boxes(),u(),init_tooltips(r),e(t).trigger("booked-load-calendar",d,o)}}),!1}),o.on("click","tr.week td",function(t){t.preventDefault();var o=e("tr.entryBlock"),i=e(this),r=i.parents("table.booked-calendar"),s=i.parent(),d=i.attr("data-date"),l=r.attr("data-calendar-id"),p=s.find("td").length;if(l||(l=0),i.hasClass("blur")||i.hasClass("booked")&&!n.publicAppointments||i.hasClass("prev-date"));else if(i.hasClass("active")){i.removeClass("active"),o.remove();var c=r.height();r.parent().height(c)}else{e("tr.week td").removeClass("active"),i.addClass("active"),o.remove(),s.after('<tr class="entryBlock loading"><td colspan="'+p+'"></td></tr>'),o.find("td").spin("booked"),booked_load_calendar_date_booking_options={action:"booked_calendar_date",date:d,calendar_id:l},e(a).trigger("booked-before-loading-calendar-booking-options");c=r.height();r.parent().height(c),e.ajax({url:n.ajax_url,type:"post",data:booked_load_calendar_date_booking_options,success:function(e){o.find("td").html(e),o.removeClass("loading"),o.find(".booked-appt-list").fadeIn(300),o.find(".booked-appt-list").addClass("shown"),adjust_calendar_boxes()}})}}),p.on("click",".booked-list-view-date-prev,.booked-list-view-date-next",function(t){t.preventDefault();var o=e(this),i=o.attr("data-date"),r=o.parents(".booked-list-view"),s=r.attr("data-default"),d=o.parents(".booked-list-view-nav").attr("data-calendar-id");void 0===s&&(s=!1),d||(d=0),r.addClass("booked-loading");var l={action:"booked_appointment_list_date",date:i,calendar_id:d,force_default:s};return e(a).trigger("booked-before-loading-appointment-list-booking-options"),r.spin("booked_top"),e.ajax({url:n.ajax_url,type:"post",data:l,success:function(e){r.html(e),b(),setTimeout(function(){r.removeClass("booked-loading")},1)}}),!1}),bookedNewAppointment=function(t){t.preventDefault();var o=e(this),i=o.attr("data-title"),r=o.attr("data-timeslot"),s=o.attr("data-date"),d=o.attr("data-calendar-id"),l=(o.parents(".timeslot"),o.parents(".booked-calendar-wrap").hasClass("booked-list-view"));if(void 0!==l&&l)var p=o.parents(".booked-list-view").find(".booked-list-view-nav").attr("data-calendar-id");else p=o.parents("table.booked-calendar").attr("data-calendar-id");return booked_appt_form_options={action:"booked_new_appointment_form",date:s,timeslot:r,calendar_id:d=p||d,title:i},e(a).trigger("booked-before-loading-booking-form"),create_booked_modal(),setTimeout(function(){e.ajax({url:n.ajax_url,type:"post",data:booked_appt_form_options,success:function(t){e(".bm-window").html(t);var o=e(".booked-modal"),n=o.find(".bm-window");n.css({visibility:"hidden"}),o.removeClass("bm-loading"),e(a).trigger("booked-on-new-app"),resize_booked_modal(),n.hide(),e(".booked-modal .bm-overlay").find(".booked-spinner").remove(),setTimeout(function(){n.css({visibility:"visible"}),n.show()},50)}})},100),!1},o.on("click","button.new-appt",bookedNewAppointment);var i=e(".booked-tabs");if(i.find("li.active").length||i.find("li:first-child").addClass("active"),i.length){l.hide();var _=i.find(".active > a").attr("href");_=(_=_.split("#"))[1],e("#profile-"+_).show(),i.find("li > a").on("click",function(t){t.preventDefault(),l.hide(),i.find("li").removeClass("active"),e(this).parent().addClass("active");var a=e(this).attr("href");return a=(a=a.split("#"))[1],e("#profile-"+a).show(),!1})}e(".booked-profile-appt-list").on("click",".booked-show-cf",function(t){t.preventDefault();var a=e(this).parent().find(".cf-meta-values-hidden");return a.is(":visible")?(a.hide(),e(this).removeClass("booked-cf-active")):(a.show(),e(this).addClass("booked-cf-active")),!1}),c.length&&e('#loginform input[type="submit"]').on("click",function(t){e('#loginform input[name="log"]').val()&&e('#loginform input[name="pwd"]').val()?e("#loginform .booked-custom-error").hide():(t.preventDefault(),c.parents(".booked-form-wrap").find(".booked-custom-error").fadeOut(200).fadeIn(200))}),d.length&&e('#profile-forgot input[type="submit"]').on("click",function(t){e('#profile-forgot input[name="user_login"]').val()?e("#profile-forgot .booked-custom-error").hide():(t.preventDefault(),d.find(".booked-custom-error").fadeOut(200).fadeIn(200))}),e(".booked-upload-wrap").length&&e(".booked-upload-wrap input[type=file]").on("change",function(){var t=e(this).val();e(this).parent().find("span").html(t),e(this).parent().addClass("hasFile")}),e(".booked-profile-appt-list").on("click",".appt-block .cancel",function(t){t.preventDefault();var a=e(this).parents(".appt-block"),o=a.attr("data-appt-id");if(confirm_delete=confirm(n.i18n_confirm_appt_delete),!0===confirm_delete){var i=parseInt(e(".booked-profile-appt-list").find("h4").find("span.count").html(),10);(i=parseInt(i-1,10))<1?(e(".booked-profile-appt-list").find("h4").find("span.count").html("0"),e(".no-appts-message").slideDown("fast")):e(".booked-profile-appt-list").find("h4").find("span.count").html(i),e(".appt-block").animate({opacity:.4},0),a.slideUp("fast",function(){e(this).remove()}),e.ajax({url:n.ajax_url,method:"post",data:{action:"booked_cancel_appt",appt_id:o},success:function(t){e(".appt-block").animate({opacity:1},150)}})}return!1});var h=e("body");h.on("touchstart click",".bm-overlay, .bm-window .close, .booked-form .cancel",function(e){return e.preventDefault(),close_booked_modal(),!1}),h.on("focusin",".booked-form input",function(){this.title===this.value&&(e(this).addClass("hasContent"),this.value="")}).on("focusout",".booked-form input",function(){""===this.value&&(e(this).removeClass("hasContent"),this.value=this.title)}),h.on("change",".booked-form input",function(){var t=e(this).attr("data-condition"),a=e(this).val();t&&e(".condition-block").length&&(e(".condition-block."+t).hide(),e("#condition-"+a).fadeIn(200),resize_booked_modal())}),h.on("submit","form#ajaxlogin",function(a){a.preventDefault(),e("form#ajaxlogin p.status").show().html('<i class="fa fa-refresh fa-spin"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_please_wait),resize_booked_modal();var o=e(this),i=o.data("date"),r=o.data("title"),s=o.data("timeslot"),d=o.data("calendar-id");e.ajax({type:"post",url:n.ajax_url,data:e("form#ajaxlogin").serialize(),success:function(a){if("success"===a){close_booked_modal();var o=e('<button data-title="'+r+'" data-timeslot="'+s+'" data-date="'+i+'" data-calendar-id="'+d+'"></button>');o.on("click",t.bookedNewAppointment),o.triggerHandler("click"),o.unbind("click",t.bookedNewAppointment),o.detach()}else e("form#ajaxlogin p.status").show().html('<i class="fa fa-warning" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_wrong_username_pass),resize_booked_modal()}}),a.preventDefault()}),h.on("click",".booked-forgot-password",function(e){e.preventDefault(),s.hide(),r.show(),resize_booked_modal()}),h.on("click",".booked-forgot-goback",function(e){e.preventDefault(),s.show(),r.hide(),resize_booked_modal()}),h.on("submit","form#ajaxforgot",function(t){t.preventDefault();var a=e("form#ajaxforgot p.status");a.show().html('<i class="fa fa-refresh fa-spin"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_please_wait),resize_booked_modal();e(this);e.ajax({type:"post",url:n.ajax_url,data:e("form#ajaxforgot").serialize(),success:function(o){"success"===o?(t.preventDefault(),s.show(),r.hide(),e("form#ajaxlogin p.status").show().html('<i class="fa fa-check" style="color:#56c477"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_password_reset),resize_booked_modal()):(console.log(o),a.show().html('<i class="fa fa-warning" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_password_reset_error),resize_booked_modal())}}),t.preventDefault()}),h.on("click",".booked-form input#submit-request-appointment",function(t){var a=e("form#newAppointmentForm p.status");a.show().html('<i class="fa fa-refresh fa-spin"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_please_wait),resize_booked_modal(),t.preventDefault();var o=e("#newAppointmentForm input[name=customer_type]").val(),i=e("#newAppointmentForm input[name=user_id]").val(),r=e("#newAppointmentForm input[name=booked_appt_name]").val(),s=e("#newAppointmentForm input[name=booked_appt_surname]").val(),d=e("#newAppointmentForm input[name=booked_appt_surname]").length,l=e("#newAppointmentForm input[name=guest_name]").val(),p=e("#newAppointmentForm input[name=guest_surname]").val(),c=e("#newAppointmentForm input[name=guest_surname]").length,u=e("#newAppointmentForm input[name=guest_email]").val(),f=e("#newAppointmentForm input[name=guest_email]").length,b=e("#newAppointmentForm input[name=booked_appt_email]").val(),m=e("#newAppointmentForm input[name=booked_appt_password]").val(),_=!1;return e(this).parents(".booked-form").find("input,textarea,select").each(function(t,a){var o=e(this).attr("required");if(o&&"hidden"===e(a).attr("type")){var n=e(a).attr("name");if(n=n.split("---"),fieldName=n[0],fieldNumber=n[1].split("___"),fieldNumber=fieldNumber[0],"radio-buttons-label"===fieldName){var i=!1;e('input:radio[name="single-radio-button---'+fieldNumber+'[]"]:checked').each(function(){e(this).val()&&(i=e(this).val())}),i||(_=!0)}else if("checkboxes-label"===fieldName){var r=!1;e('input:checkbox[name="single-checkbox---'+fieldNumber+'[]"]:checked').each(function(){e(this).val()&&(r=e(this).val())}),r||(_=!0)}}else o&&"hidden"!=e(a).attr("type")&&""===e(a).val()&&(_=!0)}),_?(a.show().html('<i class="fa fa-warning" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_fill_out_required_fields),resize_booked_modal(),!1):"new"===o&&!r||"new"===o&&d&&!s||"new"===o&&!b||"new"===o&&!m?(a.show().html('<i class="fa fa-warning" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_appt_required_fields),resize_booked_modal(),!1):"guest"===o&&!l||"guest"===o&&f&&!u||"guest"===o&&c&&!p?(a.show().html('<i class="fa fa-warning" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_appt_required_fields_guest),resize_booked_modal(),!1):(("current"===o&&i||"guest"===o&&l&&!c&&!f||"guest"===o&&l&&c&&p&&!f||"guest"===o&&l&&f&&u&&!c||"guest"===o&&l&&f&&u&&c&&p)&&k.currentUserOrGuest(),void("new"===o&&r&&b&&m&&(!d||d&&s)&&k.newUser()))});var k={formSelector:"#newAppointmentForm",formBtnRequestSelector:".booked-form input#submit-request-appointment",formStatusSelector:"p.status",formSubmitBtnSelector:"#submit-request-appointment",apptContainerSelector:".booked-appointment-details",baseFields:["guest_name","guest_surname","guest_email","action","customer_type","user_id"],apptFields:["appoinment","calendar_id","title","date","timestamp","timeslot"],userFields:["booked_appt_name","booked_appt_surname","booked_appt_email","booked_appt_password"],captchaFields:["captcha_word","captcha_code"],currentApptIndex:!1,currentApptCounter:!1,hasAnyErrors:!1,currentUserOrGuest:function(){var e=k._totalAppts();if(e){k._showLoadingMessage(),k._resetDefaultValues();var t=k._getBaseData();k.currentApptIndex=0,k.currentApptCounter=1,k._doRequestAppointment(t,e)}},newUser:function(){var t=k._totalAppts();if(t){k._showLoadingMessage(),k._resetDefaultValues();var a=k._getBaseData();if(t>1){var o=null;o=e.extend(!0,{},a),o=k._addUserRegistrationData(o),k._requestUserRegistration(o),a.customer_type="current"}else a=k._addUserRegistrationData(a);k.currentApptIndex=0,k._doRequestAppointment(a,t)}},_doRequestAppointment:function(t,a){var o=k.apptFields;0===k.currentApptIndex&&(k._hideCancelBtn(),k._disableSubmitBtn(),k.hasAnyErrors=!1);for(var i=e.extend(!0,{},t),r=0;r<o.length;r++)i[o[r]]=k._getFieldVal(o[r],k.currentApptIndex);var s=k._getFieldVal("calendar_id",k.currentApptIndex);i=k._addCustomFieldsData(i,s),k._getApptElement(k.currentApptIndex).hasClass("skip")?(k.currentApptIndex++,k.currentApptCounter++,k._doRequestAppointment(t,a,k.currentApptIndex)):e.ajax({type:"post",url:n.ajax_url,data:i,async:!0,success:function(e){k._requestAppointmentResponseHandler(e),k.currentApptIndex++,setTimeout(function(){k.currentApptCounter===a?k.hasAnyErrors?(k._enableSubmitBtn(),k._showCancelBtn()):k._onAfterRequestAppointment():(k.currentApptCounter++,k._doRequestAppointment(t,a))},100)}})},_totalAppts:function(){return e(k.formSelector+' input[name="appoinment[]"]').length},_getBaseData:function(){for(var e={},t=k.baseFields,a=0;a<t.length;a++)e[t[a]]=k._getFieldVal(t[a]);return e.is_fe_form=!0,e.total_appts=k._totalAppts(),e},_getFieldVal:function(t,a){t=void 0===t?"":t,a=void 0!==a&&a;var o=k.formSelector+" ";return!1===a?e(o+=" [name="+t+"]").val():e(o+=' [name="'+t+'[]"]').eq(a).val()},_resetDefaultValues:function(){e(".booked-form input").each(function(){var t=e(this).val();e(this).attr("title")===t&&e(this).val("")})},_resetToDefaultValues:function(){e(".booked-form input").each(function(){var t=e(this).val(),a=e(this).attr("title");t||e(this).val(a)})},_addUserRegistrationData:function(t){return e.each(k.userFields,function(e,a){t[a]=k._getFieldVal(a)}),e.each(k.captchaFields,function(e,a){var o=k._getFieldVal(a);o&&(t[a]=o)}),t},_addCustomFieldsData:function(t,a){e(".cf-block [name]").filter(function(t){var o=e(this);return parseInt(o.data("calendar-id"),10)===parseInt(a,10)&&o.attr("name").match(/---\d+/g)}).each(function(a){var o=e(this),n=o.attr("name"),i=o.val();o.attr("type");i&&(n.match(/checkbox|radio+/g)?n.match(/radio+/g)&&o.is(":checked")?t[n]=i:(void 0!==t[n]&&t[n].constructor===Array||(t[n]=[]),o.is(":checked")&&t[n].push(i)):t[n]=i)});return t},_requestUserRegistration:function(t,a){e.ajax({type:"post",url:n.ajax_url,data:t,async:!1,success:function(e){k._requestUserRegistrationResponseHandler(e)}})},_requestUserRegistrationResponseHandler:function(e){var t=e.split("###");t[0].substr(t[0].length-5)},_requestAppointment:function(e){k._requestAppointmentResponseHandler(e)},_requestAppointmentResponseHandler:function(e){var t=e.split("###");"error"!==t[0].substr(t[0].length-5)?k._requestAppointmentOnSuccess(t):k._requestAppointmentOnError(t)},_requestAppointmentOnError:function(t){var o=k._getApptElement();e(a).trigger("booked-on-requested-appt-error",[o]),k._highlightAppt(),k._setStatusMsg(t[1]),k.hasAnyErrors=!0,resize_booked_modal()},_requestAppointmentOnSuccess:function(t){var o=k._getApptElement();e(a).trigger("booked-on-requested-appt-success",[o]),k._unhighlightAppt()},_onAfterRequestAppointment:function(){var o={redirect:!1};e(a).trigger("booked-on-requested-appointment",[o]);o.redirect||(n.profilePage?t.location=n.profilePage:(k._reloadApptsList(),k._reloadCalendarTable()))},_setStatusMsg:function(t){var a=k.formSelector+" "+k.formStatusSelector;e(a).show().html('<i class="fa fa-warning" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+t)},_getApptElement:function(t){t=void 0===t?k.currentApptIndex:t;var a=k.formSelector+" "+k.apptContainerSelector;return e(a).eq(t)},_highlightAppt:function(e){var t=k._getApptElement();t.length&&t.addClass("has-error")},_unhighlightAppt:function(e){var t=k._getApptElement();t.length&&t.removeClass("has-error").addClass("skip")},_enableSubmitBtn:function(){var t=k.formSelector+" "+k.formSubmitBtnSelector;e(t).attr("disabled",!1)},_disableSubmitBtn:function(){var t=k.formSelector+" "+k.formSubmitBtnSelector;e(t).attr("disabled",!0)},_showCancelBtn:function(){e(k.formSelector).find("button.cancel").show()},_hideCancelBtn:function(){e(k.formSelector).find("button.cancel").hide()},_showLoadingMessage:function(){e("form#newAppointmentForm p.status").show().html('<i class="fa fa-refresh fa-spin"></i>&nbsp;&nbsp;&nbsp;'+n.i18n_please_wait)},_reloadApptsList:function(){e(".booked-appt-list").length&&e(".booked-appt-list").each(function(){var t=e(this),o=t.attr("data-list-date"),i=t.parents(".booked-list-view"),r=i.attr("data-default"),s=parseInt(t.find(".booked-list-view-nav").attr("data-calendar-id"),10)||0;r=void 0!==r&&r,s=s||0,i.addClass("booked-loading");var d={action:"booked_appointment_list_date",date:o,calendar_id:s,force_default:r};e(a).trigger("booked-before-loading-appointment-list-booking-options"),i.spin("booked_top"),e.ajax({url:n.ajax_url,type:"post",data:d,success:function(e){i.html(e),close_booked_modal(),b(),setTimeout(function(){i.removeClass("booked-loading")},1)}})})},_reloadCalendarTable:function(){if(e("td.active").length){var t=e("td.active"),o=t.attr("data-date"),i=parseInt(t.parents("table").data("calendar-id"),10)||0;booked_load_calendar_date_booking_options={action:"booked_calendar_date",date:o,calendar_id:i},e(a).trigger("booked-before-loading-calendar-booking-options"),e.ajax({url:n.ajax_url,type:"post",data:booked_load_calendar_date_booking_options,success:function(t){var a=e("tr.entryBlock");a.find("td").html(t),close_booked_modal(),a.removeClass("loading"),a.find(".booked-appt-list").hide().fadeIn(300),a.find(".booked-appt-list").addClass("shown"),adjust_calendar_boxes()}})}}}}),e(a).ajaxStop(function(){f(!1)});var m={bookingModalSelector:".booked-modal",tabSelector:".booked-tabs",tabNavSelector:".booked-tabs-nav span",tabCntSelector:".booked-tabs-cnt",Init:function(){e(a).on("click",this.tabNavSelector,this.tabsNav)},tabsNav:function(t){t.preventDefault(),m.switchToTab(e(this)),m.maybeResizeBookingModal()},switchToTab:function(e){var t=e,a="."+t.data("tab-cnt"),o=t.parents(m.tabSelector);t.addClass("active").siblings().removeClass("active"),o.find(m.tabCntSelector+" "+a).addClass("active").siblings().removeClass("active")},maybeResizeBookingModal:function(){e(m.bookingModalSelector).length&&resize_booked_modal()}}}(jQuery,window,document);var previousRealModalHeight=100;function resize_booked_modal(){"use strict";var e=jQuery(window).height(),t=jQuery(window).width();if(jQuery(".booked-modal .bm-window .booked-scrollable").length)(a=jQuery(".booked-modal .bm-window .booked-scrollable")[0].scrollHeight)<100?a=previousRealModalHeight:previousRealModalHeight=a;else var a=0;var o,n,i=a-43;if(i=e<a+43+43?e-43-43:a,t>720){n=(o=i-25)-15;var r=(o+78)/2}else{n=(o=e-43)-60-43;r=o/2}jQuery(".booked-modal").css({"margin-top":"-"+r+"px"}),jQuery(".booked-modal .bm-window").css({"max-height":o+"px"}),jQuery(".booked-modal .bm-window .booked-scrollable").css({"max-height":n+"px"})}function close_booked_modal(){"use strict";var e=jQuery(".booked-modal");e.fadeOut(200),e.addClass("bm-closing"),jQuery("body").removeClass("booked-noScroll"),setTimeout(function(){e.remove()},300)}function init_tooltips(e){"use strict";jQuery(".tooltipster").tooltipster({theme:"tooltipster-light",animation:"grow",speed:200,delay:100,offsetY:-13})}function adjust_calendar_boxes(){"use strict";jQuery(".booked-calendar").each(function(){var e=jQuery(window).width(),t=jQuery(this).parents(".booked-calendar-wrap").hasClass("small"),a=jQuery(this).find("tbody tr.week td").width(),o=jQuery(this).height(),n=1*a;jQuery(this).find("tbody tr.week td").height(n),jQuery(this).find("tbody tr.week td .date").css("line-height",n+"px"),jQuery(this).find("tbody tr.week td .date .number").css("line-height",n+"px"),t||e<720?jQuery(this).find("tbody tr.week td .date .number").css("line-height",n+"px"):jQuery(this).find("tbody tr.week td .date .number").css("line-height","");o=jQuery(this).height();jQuery(this).parent().height(o)})}